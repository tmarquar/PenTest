<?php // ssl_data.php
class SSL_Data
{
    // connection shiz
    private $conn;
    private $table_name = "web_test_ssl_data";
    
    // object properties
    public $business_id;
    public $value;
    
    public function __construct($db)
    {
        $this->conn     = $db;
    }
    
    // read all tests with respect to this business
    function read()
    {
        $this->business_id  = htmlspecialchars(strip_tags($this->business_id));
        
        // select all values matching the business_id
        $query  = "SELECT Value 
                    FROM ". $this->table_name ."
                    WHERE
                        Business_ID = '". $this->business_id ."'
                    ORDER BY Value";
        
        // prepare the statement and get'r'done
        $stmt   = $this->conn->prepare($query);
        
        $stmt->execute();
        
        return $stmt;
    }
    
    // and an inserter function so that there can be any data to even read
    function create()
    {
        $query  = "INSERT INTO ". $this->table_name ."
                    (
                        Business_ID,
                        Value
                    )
                    VALUES
                    (
                        :business_id,
                        :value
                    )";
        // prepare that statement
        $stmt   = $this->conn->prepare($query);
        
        // sanitize relevant data
        $this->business_id  = htmlspecialchars(strip_tags($this->business_id));
        $this->value        = htmlspecialchars(strip_tags($this->value));
        
        // ... and in the darkness bind them
        $stmt->bindParam(':business_id',    $this->business_id);
        $stmt->bindParam(':value',          $this->value);
        
        // execute statement, let function caller know how that went
        if ($stmt->execute())
        {
            return true;
        }
        return false;
    }
}
?>